"use strict";(self.webpackChunk_1000goals_frontend=self.webpackChunk_1000goals_frontend||[]).push([[979],{979:(M,h,s)=>{s.r(h),s.d(h,{AdminMembersComponent:()=>O});var d=s(4755),f=s(774),g=s(8386),e=s(1902);let v=(()=>{class t{constructor(){this.name="",this.id="id",this.points=0}get linkToUserDetail(){return"/"+[g.Z.user.base,g.Z.user.details].join("/").replace(":id",this.id)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-card"]],inputs:{name:"name",id:"id",points:"points"},standalone:!0,features:[e.jDz],decls:12,vars:3,consts:[[1,"user-card"],[1,"name-section"],[1,"name"],["href","",1,"details",3,"routerLink"],[1,"points-section"],[1,"label"],[1,"points"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._uU(3),e.qZA(),e.TgZ(4,"div")(5,"a",3),e._uU(6,"Details"),e.qZA()()(),e.TgZ(7,"div",4)(8,"span",5),e._uU(9,"Points"),e.qZA(),e.TgZ(10,"span",6),e._uU(11),e.qZA()()()),2&r&&(e.xp6(3),e.Oqu(n.name),e.xp6(2),e.Q6J("routerLink",n.linkToUserDetail),e.xp6(6),e.Oqu(n.points))},dependencies:[d.ez,f.Bz,f.rH],styles:["[_ngcontent-%COMP%]:root{--border-primary:1px solid rgba(146, 146, 146, .6);--border-primary-thick:2px solid rgba(146, 146, 146, .6);--border-primary-color:rgba(146, 146, 146, .6);--background-primary:rgba(0,0,0, .4);--primary-alt:#ffffffcc;--goal-card-badge-bg:#e4dec6a8;--user-nav-bg-color:black;--active-button-box-shadow:inset -11px 11px 100px -51px #FFFFFF;--error-primary:rgb(211, 62, 62);--success-primary:rgb(43, 131, 47);--success-toastr-bg: #00ff002b;--error-toastr-bg: #d5000091;--user-menu-header-height:6.5rem;--user-nav-height:7rem;--app-padding:1rem;--footer-height:5rem;--goals-proposed-goals-details-buttons-navbar:3rem;--total-height:calc(var(--user-nav-height) + var(--footer-height) + var(--goals-proposed-goals-details-buttons-navbar));--border-radius:1.6rem}.user-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;outline:1px solid var(--border-primary-color);padding:1.5rem 1.2rem;overflow:hidden;background:rgba(255,255,255,0);box-shadow:0 4px 30px #0000001a;backdrop-filter:blur(6.9px);-webkit-backdrop-filter:blur(6.9px);box-shadow:inset 0 0 15px 1px #cacacac7;border:1px solid rgba(202,202,202,.24);border-radius:var(--border-radius);border:var(--border-primary)}.name-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.name[_ngcontent-%COMP%]{font-size:2rem}.details[_ngcontent-%COMP%]{all:unset;cursor:pointer;font-size:1.5rem;outline:1px solid var(--border-primary-color);border-radius:var(--border-radius);padding:.2rem}.points-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.points-section[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:1.5rem}.points-section[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{font-size:3rem}"]}),t})();var b=s(2980),U=s(1354),p=s(5030),u=s(8746),C=s(5001),i=s(1397),m=s(3071);const a=["name"];let o=(()=>{class t{constructor(r,n){this.gameService=r,this.userService=n,this.username=null,this.disabledButton=!1,this.errorLabel=""}onClickAddUser(){this.username&&((0,C.S)(this.nameInput.control)?this.errorLabel="Only alphanumeric names are accepted":this.gameService.addUserToGame(this.username).pipe((0,u.x)(()=>{this.disabledButton=!1})).subscribe(n=>{n.data&&(this.userService.patchUserData(l=>(l.game=n.data.game,l)),this.username="",this.nameInput.reset(""),this.form.reset())}))}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(i.h),e.Y36(m.K))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-admin-add-user-form"]],viewQuery:function(r,n){if(1&r&&(e.Gf(a,7,p.On),e.Gf(p.F,7)),2&r){let l;e.iGM(l=e.CRH())&&(n.nameInput=l.first),e.iGM(l=e.CRH())&&(n.form=l.first)}},standalone:!0,features:[e.jDz],decls:6,vars:3,consts:[[1,"add-user-form"],["userform","ngForm"],["label","Name","name","name","required","",3,"ngModel","errorLabel","ngModelChange"],["name","ngModel"],[3,"disabled","click"]],template:function(r,n){if(1&r&&(e.TgZ(0,"form",0,1)(2,"app-input-text",2,3),e.NdJ("ngModelChange",function(y){return n.username=y}),e.qZA(),e.TgZ(4,"app-button",4),e.NdJ("click",function(){return n.onClickAddUser()}),e._uU(5,"Add"),e.qZA()()),2&r){const l=e.MAs(1);e.xp6(2),e.Q6J("ngModel",n.username)("errorLabel",n.errorLabel),e.xp6(2),e.Q6J("disabled",l.form.invalid)}},dependencies:[d.ez,b.m,U.r,p.u5,p._Y,p.JJ,p.JL,p.Q7,p.On,p.F],styles:[".add-user-form[_ngcontent-%COMP%]{display:flex;gap:2rem;align-items:center;padding:4rem 2rem;background:rgba(255,255,255,0);box-shadow:0 4px 30px #0000001a;backdrop-filter:blur(6.9px);-webkit-backdrop-filter:blur(6.9px);box-shadow:inset 0 0 15px 1px #cacacac7;border:1px solid rgba(202,202,202,.24);border-radius:var(--border-radius)}app-input-text[_ngcontent-%COMP%]{align-self:flex-end;flex:1}"]}),t})();var P=s(7135);let A=(()=>{class t{transform(r,n){return(0,P.X)(r,n)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275pipe=e.Yjl({name:"pointsPipe",type:t,pure:!0,standalone:!0}),t})();function x(t,c){if(1&t&&(e._UZ(0,"app-user-card",4),e.ALo(1,"pointsPipe")),2&t){const r=c.$implicit,n=e.oxw();e.Q6J("name",r.name)("id",r.id)("points",e.xi3(1,3,n.userData,r.id))}}function _(t,c){1&t&&(e.TgZ(0,"div",5)(1,"p",6),e._uU(2,"Add member"),e.qZA(),e._UZ(3,"app-admin-add-user-form"),e.qZA())}let O=(()=>{class t{constructor(r){this.userService=r}get memberList(){return this.userService.getUserData()?.game?.players||[]}get userData(){return this.userService.getUserData()}get isAdmin(){return this.userService.isAdmin()}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(m.K))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-admin-members"]],standalone:!0,features:[e.jDz],decls:5,vars:2,consts:[[1,"members-label"],[1,"members-container"],[3,"name","id","points",4,"ngFor","ngForOf"],["class","add-member",4,"ngIf"],[3,"name","id","points"],[1,"add-member"],[1,"add-member-label"]],template:function(r,n){1&r&&(e.TgZ(0,"p",0),e._uU(1," Members\n"),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,x,2,6,"app-user-card",2),e.qZA(),e.YNc(4,_,4,0,"div",3)),2&r&&(e.xp6(3),e.Q6J("ngForOf",n.memberList),e.xp6(1),e.Q6J("ngIf",n.isAdmin))},dependencies:[d.ez,d.sg,d.O5,v,o,A],styles:[".add-member[_ngcontent-%COMP%]{margin-top:10rem}.add-member-label[_ngcontent-%COMP%], .members-label[_ngcontent-%COMP%]{font-size:2rem;margin:0;margin-bottom:1rem}.members-container[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;gap:1rem;max-height:60vh;overflow:auto}"]}),t})()},1397:(M,h,s)=>{s.d(h,{h:()=>p});var d=s(4140),f=s(3349),g=s(515),e=s(1902),v=s(3071),b=s(3144),U=s(7502);let p=(()=>{class u{constructor(i,m,a,o){this.userService=i,this.http=m,this.toastrService=a,this.apiBase=o,this.createGameURL="",this.insertUserURL="",this.insertProposedGoalURL="",this.upvoteProposedGoalURL="",this.createGameURL=o+d.Z.games.base+d.Z.games.insertGame,this.insertUserURL=o+d.Z.games.base+d.Z.games.insertUser,this.insertProposedGoalURL=o+d.Z.games.base+d.Z.games.insertProposedGoals,this.upvoteProposedGoalURL=o+d.Z.games.base+d.Z.games.upvoteGoal}createGame(i){const a=this.userService.getUserData()?.user?.name;if(console.log(a),!a)return this.toastrService.setToastrType("error"),this.toastrService.setToastrMessage("User is not logged in"),this.toastrService.setSowToastr(!0),g.E;const o={game:{description:i.description,name:i.name},username:a};return console.log({requestBody:o}),this.http.post(this.createGameURL,o).pipe()}addUserToGame(i){const m=this.userService.getUserData()?.user?.name,a=this.userService.getUserData()?.game?.id;return m&&a?this.http.patch(this.insertUserURL,{username:i,adminId:m,gameId:a}):(this.toastrService.setToastrType("error"),this.toastrService.setToastrMessage("Error while inserting the user"),this.toastrService.setSowToastr(!0),g.E)}addProposedGoalToGame(i){if(!i)return;const m=this.userService.getUserData()?.game?.id,a=this.userService.getUserData()?.user.name;return m&&a?this.http.patch(this.insertProposedGoalURL,{gameId:m,goals:[i],username:a}):void 0}upvoteProposedGoal(i){const m=this.userService.getUserData()?.game?.id,a=this.userService.getUserData()?.user.name;if(m&&a)return this.http.patch(this.upvoteProposedGoalURL,{gameId:m,goalId:i,username:a})}}return u.\u0275fac=function(i){return new(i||u)(e.LFG(v.K),e.LFG(b.eN),e.LFG(U._),e.LFG(f.Sg))},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);