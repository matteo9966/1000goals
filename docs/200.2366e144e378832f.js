"use strict";(self.webpackChunk_1000goals_frontend=self.webpackChunk_1000goals_frontend||[]).push([[200],{2200:(B,u,e)=>{e.r(u),e.d(u,{SignupPageComponent:()=>C});var m=e(4755),d=e(7124),c=e(2980),g=e(1354),f=e(8386),i=e(5030);const h=o=>t=>{const s=o.get("password")?.value;return s&&s===t.value?null:{confirmPassword:!0}};var v=e(8505),S=e(5001),r=e(1902),b=e(774),p=e(4140),L=e(3349),P=e(3144),l=e(1273);let w=(()=>{class o{constructor(t,s,n){this.http=t,this.apiBase=s,this.logger=n,this.signupURL="",this.signupURL=this.apiBase.concat(p.Z.users.base,p.Z.users.signupUser)}signup(t){return this.logger.info("signup url: "+this.signupURL),this.http.post(this.signupURL,t)}}return o.\u0275fac=function(t){return new(t||o)(r.LFG(P.eN),r.LFG(L.Sg),r.LFG(l.m))},o.\u0275prov=r.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var T=e(7502);let C=(()=>{class o{constructor(t,s,n,y,U){this.fb=t,this.router=s,this.signupService=n,this.logger=y,this.toastrService=U,this.minLengthName=3,this.passMinLength=6,this.disableSignupBtn=!1,this.initForm()}ngOnInit(){this.form.get("confirmPassword")?.addValidators([h(this.form)])}initForm(){this.form=this.fb.group({name:this.fb.control("",[i.kI.required,S.S]),password:this.fb.control("",[i.kI.required,i.kI.minLength(this.passMinLength)]),confirmPassword:this.fb.control("",[i.kI.required])})}onClickSignup(){if(this.disableSignupBtn)return;if(this.form.updateValueAndValidity(),Object.values(this.form.controls).forEach(s=>{s.markAsTouched(),s.markAsDirty(),s.updateValueAndValidity()}),!Object.values(this.form.controls).every(s=>s.valid))return this.toastrService.setToastrMessage("Invalid signup form, complete required fields"),this.toastrService.setToastrType("error"),void this.toastrService.setSowToastr(!0);this.disableSignupBtn=!0;const t={name:this.form.get("name")?.value,password:this.form.get("password")?.value};this.signupService.signup(t).pipe((0,v.b)({complete:()=>{setTimeout(()=>{this.disableSignupBtn=!1},5e3)}})).subscribe(s=>{s&&s?.data?.success?(this.toastrService.setToastrMessage("Signup success!"),this.toastrService.setToastrType("success"),this.toastrService.setSowToastr(!0),Object.values(this.form.controls).forEach(n=>{n.reset(),n.setValue(""),n.markAsUntouched()}),this.form.markAsUntouched()):(this.toastrService.setToastrMessage("Signup error, retry later"),this.toastrService.setToastrType("error"),this.toastrService.setSowToastr(!0))})}onClickBack(){this.router.navigateByUrl("/"+f.Z.home.base)}get nameErrorLabel(){if(this.form.get("name")?.errors?.required)return"Name is required";const s=this.form.get("name")?.errors?.username;return s||null}get confirmPasswordErrorLabel(){const t=this.form.get("confirmPassword")?.errors;return t?.required?"Password confirm is required":t?.confirmPassword?"Password does not correspond":null}get passwordErrorLabel(){const t=this.form.get("password")?.errors;return t?.required?"Password is required":t?.minlength?"Password min length is "+this.passMinLength:null}}return o.\u0275fac=function(t){return new(t||o)(r.Y36(i.qu),r.Y36(b.F0),r.Y36(w),r.Y36(l.m),r.Y36(T._))},o.\u0275cmp=r.Xpm({type:o,selectors:[["app-signup-page"]],standalone:!0,features:[r.jDz],decls:10,vars:5,consts:[["title","Signup",3,"formGroup"],[1,"inputs-area"],["id","name-id","label","Name","formControlName","name",3,"errorLabel"],["id","password-id","label","Password","formControlName","password","type","password",3,"errorLabel"],["id","confirm-password-id","label","Confirm password","formControlName","confirmPassword","type","password",3,"errorLabel"],[1,"buttons-area"],[3,"click"],[3,"disabled","click"]],template:function(t,s){1&t&&(r.TgZ(0,"app-form",0)(1,"div",1),r._UZ(2,"app-input-text",2)(3,"app-input-text",3)(4,"app-input-text",4),r.qZA(),r.TgZ(5,"div",5)(6,"app-button",6),r.NdJ("click",function(){return s.onClickBack()}),r._uU(7,"Back"),r.qZA(),r.TgZ(8,"app-button",7),r.NdJ("click",function(){return s.onClickSignup()}),r._uU(9,"Signup"),r.qZA()()()),2&t&&(r.Q6J("formGroup",s.form),r.xp6(2),r.Q6J("errorLabel",s.nameErrorLabel),r.xp6(1),r.Q6J("errorLabel",s.passwordErrorLabel),r.xp6(1),r.Q6J("errorLabel",s.confirmPasswordErrorLabel),r.xp6(4),r.Q6J("disabled",s.disableSignupBtn))},dependencies:[m.ez,d.U,c.m,g.r,i.UX,i.JJ,i.JL,i.sg,i.u]}),o})()}}]);